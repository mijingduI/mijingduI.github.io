<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TypeScript Office - 类 | 阿星 精神时の屋</title>
    <meta name="generator" content="VuePress 1.9.5">
    <link rel="shortcut icon" href="/img/favicon.ico">
    <link rel="stylesheet" href="https://at.alicdn.com/t/font_3114978_qe0b39no76.css">
    <script>var _hmt = _hmt || [];
          (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?14366b81d7983944862ae088864b209e"; 
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
          })();
          </script>
    <meta name="description" content="互联网技术博客，包含Java、C#、Golang、易语言、游戏逆向、汇编等技术文章。">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="keywords" content="互联网技术博客，包含Java、C#、Golang、易语言、游戏逆向、汇编等技术文章。">
    <meta name="theme-color" content="#11a8cd">
    
    <link rel="preload" href="/assets/css/0.styles.75a488ab.css" as="style"><link rel="preload" href="/assets/js/app.e9152798.js" as="script"><link rel="preload" href="/assets/js/2.38a2c275.js" as="script"><link rel="preload" href="/assets/js/317.ae13d1dd.js" as="script"><link rel="preload" href="/assets/js/7.c9d16a87.js" as="script"><link rel="preload" href="/assets/js/4.d198576f.js" as="script"><link rel="prefetch" href="/assets/js/10.188eb72a.js"><link rel="prefetch" href="/assets/js/100.5dd5864c.js"><link rel="prefetch" href="/assets/js/101.4e3ae8ef.js"><link rel="prefetch" href="/assets/js/102.4beee255.js"><link rel="prefetch" href="/assets/js/103.28dc5d01.js"><link rel="prefetch" href="/assets/js/104.ada74d0f.js"><link rel="prefetch" href="/assets/js/105.8eaccbe2.js"><link rel="prefetch" href="/assets/js/106.7190986d.js"><link rel="prefetch" href="/assets/js/107.9547df04.js"><link rel="prefetch" href="/assets/js/108.ca558947.js"><link rel="prefetch" href="/assets/js/109.68f1c70f.js"><link rel="prefetch" href="/assets/js/11.335552b4.js"><link rel="prefetch" href="/assets/js/110.e9af8e71.js"><link rel="prefetch" href="/assets/js/111.bbd64e4e.js"><link rel="prefetch" href="/assets/js/112.54dce4bf.js"><link rel="prefetch" href="/assets/js/113.33ef30e5.js"><link rel="prefetch" href="/assets/js/114.3217c260.js"><link rel="prefetch" href="/assets/js/115.95735873.js"><link rel="prefetch" href="/assets/js/116.ab6d0147.js"><link rel="prefetch" href="/assets/js/117.3e83abb1.js"><link rel="prefetch" href="/assets/js/118.143549c0.js"><link rel="prefetch" href="/assets/js/119.b8c9747e.js"><link rel="prefetch" href="/assets/js/12.9e8e1698.js"><link rel="prefetch" href="/assets/js/120.d4930414.js"><link rel="prefetch" href="/assets/js/121.9ba52a17.js"><link rel="prefetch" href="/assets/js/122.3a0490cc.js"><link rel="prefetch" href="/assets/js/123.b10f79af.js"><link rel="prefetch" href="/assets/js/124.6d12a686.js"><link rel="prefetch" href="/assets/js/125.c264fb08.js"><link rel="prefetch" href="/assets/js/126.1c983a31.js"><link rel="prefetch" href="/assets/js/127.d1577a05.js"><link rel="prefetch" href="/assets/js/128.5cfbad57.js"><link rel="prefetch" href="/assets/js/129.73d15fd6.js"><link rel="prefetch" href="/assets/js/13.a5c701e0.js"><link rel="prefetch" href="/assets/js/130.a17b91c3.js"><link rel="prefetch" href="/assets/js/131.60f6e361.js"><link rel="prefetch" href="/assets/js/132.d4a09396.js"><link rel="prefetch" href="/assets/js/133.0def91c2.js"><link rel="prefetch" href="/assets/js/134.713218a7.js"><link rel="prefetch" href="/assets/js/135.1e75aa3e.js"><link rel="prefetch" href="/assets/js/136.36cacecd.js"><link rel="prefetch" href="/assets/js/137.e51c0df9.js"><link rel="prefetch" href="/assets/js/138.8fd13027.js"><link rel="prefetch" href="/assets/js/139.6cb39d71.js"><link rel="prefetch" href="/assets/js/14.cb636573.js"><link rel="prefetch" href="/assets/js/140.a4732878.js"><link rel="prefetch" href="/assets/js/141.052cefb6.js"><link rel="prefetch" href="/assets/js/142.138f52c3.js"><link rel="prefetch" href="/assets/js/143.e75ee230.js"><link rel="prefetch" href="/assets/js/144.c4c9cc1c.js"><link rel="prefetch" href="/assets/js/145.3e138bee.js"><link rel="prefetch" href="/assets/js/146.8e4442a9.js"><link rel="prefetch" href="/assets/js/147.1ae072cd.js"><link rel="prefetch" href="/assets/js/148.95efc83f.js"><link rel="prefetch" href="/assets/js/149.1e9796e3.js"><link rel="prefetch" href="/assets/js/15.4909b854.js"><link rel="prefetch" href="/assets/js/150.121caebf.js"><link rel="prefetch" href="/assets/js/151.7ecc8f09.js"><link rel="prefetch" href="/assets/js/152.a349fc5e.js"><link rel="prefetch" href="/assets/js/153.38939649.js"><link rel="prefetch" href="/assets/js/154.fff7dc02.js"><link rel="prefetch" href="/assets/js/155.f8044b4b.js"><link rel="prefetch" href="/assets/js/156.2c8d83e3.js"><link rel="prefetch" href="/assets/js/157.4bb24015.js"><link rel="prefetch" href="/assets/js/158.39a55d83.js"><link rel="prefetch" href="/assets/js/159.888dd121.js"><link rel="prefetch" href="/assets/js/16.9bd34245.js"><link rel="prefetch" href="/assets/js/160.59bfcd50.js"><link rel="prefetch" href="/assets/js/161.73e1bd1c.js"><link rel="prefetch" href="/assets/js/162.13987fb3.js"><link rel="prefetch" href="/assets/js/163.e0fc4fd3.js"><link rel="prefetch" href="/assets/js/164.c536e9ed.js"><link rel="prefetch" href="/assets/js/165.b1e9188c.js"><link rel="prefetch" href="/assets/js/166.24aa8377.js"><link rel="prefetch" href="/assets/js/167.cb791f87.js"><link rel="prefetch" href="/assets/js/168.f60e3695.js"><link rel="prefetch" href="/assets/js/169.bdc0920c.js"><link rel="prefetch" href="/assets/js/17.385cde94.js"><link rel="prefetch" href="/assets/js/170.c5c97354.js"><link rel="prefetch" href="/assets/js/171.7b1ad789.js"><link rel="prefetch" href="/assets/js/172.b5a5df41.js"><link rel="prefetch" href="/assets/js/173.b0798630.js"><link rel="prefetch" href="/assets/js/174.c1199fb7.js"><link rel="prefetch" href="/assets/js/175.bc298342.js"><link rel="prefetch" href="/assets/js/176.e023c386.js"><link rel="prefetch" href="/assets/js/177.3365eb85.js"><link rel="prefetch" href="/assets/js/178.1c812235.js"><link rel="prefetch" href="/assets/js/179.7a4ef255.js"><link rel="prefetch" href="/assets/js/18.242106a1.js"><link rel="prefetch" href="/assets/js/180.34710608.js"><link rel="prefetch" href="/assets/js/181.8d2ffc10.js"><link rel="prefetch" href="/assets/js/182.3dfc16b1.js"><link rel="prefetch" href="/assets/js/183.d7a6857a.js"><link rel="prefetch" href="/assets/js/184.59ad8234.js"><link rel="prefetch" href="/assets/js/185.0ad88aa7.js"><link rel="prefetch" href="/assets/js/186.c17df066.js"><link rel="prefetch" href="/assets/js/187.c2a823f3.js"><link rel="prefetch" href="/assets/js/188.4272caff.js"><link rel="prefetch" href="/assets/js/189.1682354f.js"><link rel="prefetch" href="/assets/js/19.592d8e57.js"><link rel="prefetch" href="/assets/js/190.d4c8afd6.js"><link rel="prefetch" href="/assets/js/191.34bbcd9b.js"><link rel="prefetch" href="/assets/js/192.50b6aac6.js"><link rel="prefetch" href="/assets/js/193.c7043b73.js"><link rel="prefetch" href="/assets/js/194.acf3fdd2.js"><link rel="prefetch" href="/assets/js/195.6b7b6802.js"><link rel="prefetch" href="/assets/js/196.60f3dbe1.js"><link rel="prefetch" href="/assets/js/197.3acb436b.js"><link rel="prefetch" href="/assets/js/198.0edf86fa.js"><link rel="prefetch" href="/assets/js/199.79ba8542.js"><link rel="prefetch" href="/assets/js/20.c5b342f8.js"><link rel="prefetch" href="/assets/js/200.f95afe9f.js"><link rel="prefetch" href="/assets/js/201.cb512539.js"><link rel="prefetch" href="/assets/js/202.fcf25066.js"><link rel="prefetch" href="/assets/js/203.a43c73df.js"><link rel="prefetch" href="/assets/js/204.2395aec2.js"><link rel="prefetch" href="/assets/js/205.76273eca.js"><link rel="prefetch" href="/assets/js/206.d1d16e48.js"><link rel="prefetch" href="/assets/js/207.ae9e7e12.js"><link rel="prefetch" href="/assets/js/208.c6c57b6e.js"><link rel="prefetch" href="/assets/js/209.1f0f043b.js"><link rel="prefetch" href="/assets/js/21.f810eaa2.js"><link rel="prefetch" href="/assets/js/210.39003b35.js"><link rel="prefetch" href="/assets/js/211.7dab8ad2.js"><link rel="prefetch" href="/assets/js/212.2bf95f75.js"><link rel="prefetch" href="/assets/js/213.52a71825.js"><link rel="prefetch" href="/assets/js/214.101e6174.js"><link rel="prefetch" href="/assets/js/215.7c6c20c7.js"><link rel="prefetch" href="/assets/js/216.bb59f914.js"><link rel="prefetch" href="/assets/js/217.92d5cf38.js"><link rel="prefetch" href="/assets/js/218.ab7fb4bd.js"><link rel="prefetch" href="/assets/js/219.95f6dd29.js"><link rel="prefetch" href="/assets/js/22.f79c22a0.js"><link rel="prefetch" href="/assets/js/220.f894549c.js"><link rel="prefetch" href="/assets/js/221.03d7c6c1.js"><link rel="prefetch" href="/assets/js/222.bb84da56.js"><link rel="prefetch" href="/assets/js/223.844d9b99.js"><link rel="prefetch" href="/assets/js/224.b2e9cf83.js"><link rel="prefetch" href="/assets/js/225.3c2dc558.js"><link rel="prefetch" href="/assets/js/226.9357ddd7.js"><link rel="prefetch" href="/assets/js/227.a14c09d8.js"><link rel="prefetch" href="/assets/js/228.290bdd8c.js"><link rel="prefetch" href="/assets/js/229.1fdbf5dc.js"><link rel="prefetch" href="/assets/js/23.7ae5086b.js"><link rel="prefetch" href="/assets/js/230.9cc51fad.js"><link rel="prefetch" href="/assets/js/231.731d246e.js"><link rel="prefetch" href="/assets/js/232.bd57162f.js"><link rel="prefetch" href="/assets/js/233.66c7c8a1.js"><link rel="prefetch" href="/assets/js/234.b8996b84.js"><link rel="prefetch" href="/assets/js/235.a06c178e.js"><link rel="prefetch" href="/assets/js/236.c35748b3.js"><link rel="prefetch" href="/assets/js/237.e6470d9e.js"><link rel="prefetch" href="/assets/js/238.89d583c7.js"><link rel="prefetch" href="/assets/js/239.2c644998.js"><link rel="prefetch" href="/assets/js/24.d3c496f5.js"><link rel="prefetch" href="/assets/js/240.2a9203e9.js"><link rel="prefetch" href="/assets/js/241.9ae55de2.js"><link rel="prefetch" href="/assets/js/242.72dda6c8.js"><link rel="prefetch" href="/assets/js/243.f3db2bca.js"><link rel="prefetch" href="/assets/js/244.4de3712a.js"><link rel="prefetch" href="/assets/js/245.0c623b7f.js"><link rel="prefetch" href="/assets/js/246.96d8f766.js"><link rel="prefetch" href="/assets/js/247.9bc7bb14.js"><link rel="prefetch" href="/assets/js/248.e0d71e3c.js"><link rel="prefetch" href="/assets/js/249.f205c474.js"><link rel="prefetch" href="/assets/js/25.aeffe170.js"><link rel="prefetch" href="/assets/js/250.e0b89c71.js"><link rel="prefetch" href="/assets/js/251.0a1dff82.js"><link rel="prefetch" href="/assets/js/252.0a2b1abf.js"><link rel="prefetch" href="/assets/js/253.75a66718.js"><link rel="prefetch" href="/assets/js/254.bac91309.js"><link rel="prefetch" href="/assets/js/255.4585deb2.js"><link rel="prefetch" href="/assets/js/256.e7119f59.js"><link rel="prefetch" href="/assets/js/257.c0844f83.js"><link rel="prefetch" href="/assets/js/258.c3cbb48e.js"><link rel="prefetch" href="/assets/js/259.af363aa7.js"><link rel="prefetch" href="/assets/js/26.235ea87a.js"><link rel="prefetch" href="/assets/js/260.9eecea0c.js"><link rel="prefetch" href="/assets/js/261.e61db71d.js"><link rel="prefetch" href="/assets/js/262.a5fa270f.js"><link rel="prefetch" href="/assets/js/263.437c94dc.js"><link rel="prefetch" href="/assets/js/264.0771677a.js"><link rel="prefetch" href="/assets/js/265.dac3ac33.js"><link rel="prefetch" href="/assets/js/266.493e5e67.js"><link rel="prefetch" href="/assets/js/267.c9b6b010.js"><link rel="prefetch" href="/assets/js/268.fd068824.js"><link rel="prefetch" href="/assets/js/269.6bed8d16.js"><link rel="prefetch" href="/assets/js/27.37ef57c6.js"><link rel="prefetch" href="/assets/js/270.9594bb9d.js"><link rel="prefetch" href="/assets/js/271.b67fc343.js"><link rel="prefetch" href="/assets/js/272.b6799f68.js"><link rel="prefetch" href="/assets/js/273.c5720146.js"><link rel="prefetch" href="/assets/js/274.92a3c1a1.js"><link rel="prefetch" href="/assets/js/275.94bead6d.js"><link rel="prefetch" href="/assets/js/276.4f8cc7d1.js"><link rel="prefetch" href="/assets/js/277.8c3a980a.js"><link rel="prefetch" href="/assets/js/278.82591e99.js"><link rel="prefetch" href="/assets/js/279.4169aeaf.js"><link rel="prefetch" href="/assets/js/28.b5a6c86a.js"><link rel="prefetch" href="/assets/js/280.c8c9ae49.js"><link rel="prefetch" href="/assets/js/281.9a7a4d55.js"><link rel="prefetch" href="/assets/js/282.b74debdd.js"><link rel="prefetch" href="/assets/js/283.63125d5f.js"><link rel="prefetch" href="/assets/js/284.cadc5e1d.js"><link rel="prefetch" href="/assets/js/285.91c1995c.js"><link rel="prefetch" href="/assets/js/286.0de78930.js"><link rel="prefetch" href="/assets/js/287.e73a0c86.js"><link rel="prefetch" href="/assets/js/288.d4c26769.js"><link rel="prefetch" href="/assets/js/289.64c3d5d2.js"><link rel="prefetch" href="/assets/js/29.c8256ce2.js"><link rel="prefetch" href="/assets/js/290.d2e46752.js"><link rel="prefetch" href="/assets/js/291.040773d1.js"><link rel="prefetch" href="/assets/js/292.e32af36d.js"><link rel="prefetch" href="/assets/js/293.ca50ac07.js"><link rel="prefetch" href="/assets/js/294.62f2a9ca.js"><link rel="prefetch" href="/assets/js/295.2b5d7273.js"><link rel="prefetch" href="/assets/js/296.babff4c2.js"><link rel="prefetch" href="/assets/js/297.9708d68c.js"><link rel="prefetch" href="/assets/js/298.44118eb8.js"><link rel="prefetch" href="/assets/js/299.819e1a17.js"><link rel="prefetch" href="/assets/js/3.98944d99.js"><link rel="prefetch" href="/assets/js/30.d080d13b.js"><link rel="prefetch" href="/assets/js/300.c6ffa0af.js"><link rel="prefetch" href="/assets/js/301.547a5da0.js"><link rel="prefetch" href="/assets/js/302.991b9208.js"><link rel="prefetch" href="/assets/js/303.8f832666.js"><link rel="prefetch" href="/assets/js/304.8f70c766.js"><link rel="prefetch" href="/assets/js/305.375ca5d4.js"><link rel="prefetch" href="/assets/js/306.77f2b6e5.js"><link rel="prefetch" href="/assets/js/307.9b51ec62.js"><link rel="prefetch" href="/assets/js/308.6d0bcde0.js"><link rel="prefetch" href="/assets/js/309.c2560822.js"><link rel="prefetch" href="/assets/js/31.cac1c135.js"><link rel="prefetch" href="/assets/js/310.5f461822.js"><link rel="prefetch" href="/assets/js/311.b677460a.js"><link rel="prefetch" href="/assets/js/312.f0627fb2.js"><link rel="prefetch" href="/assets/js/313.04a6df0b.js"><link rel="prefetch" href="/assets/js/314.ed1493e5.js"><link rel="prefetch" href="/assets/js/315.76cd4a9b.js"><link rel="prefetch" href="/assets/js/316.b1e405c6.js"><link rel="prefetch" href="/assets/js/318.38402487.js"><link rel="prefetch" href="/assets/js/319.b599b20c.js"><link rel="prefetch" href="/assets/js/32.d1a10817.js"><link rel="prefetch" href="/assets/js/320.8cda6965.js"><link rel="prefetch" href="/assets/js/321.6d23d913.js"><link rel="prefetch" href="/assets/js/322.5c6afd7c.js"><link rel="prefetch" href="/assets/js/323.3a00fc35.js"><link rel="prefetch" href="/assets/js/324.bddb3317.js"><link rel="prefetch" href="/assets/js/325.a67c445b.js"><link rel="prefetch" href="/assets/js/326.35351bf6.js"><link rel="prefetch" href="/assets/js/327.2ec4de5e.js"><link rel="prefetch" href="/assets/js/328.0269fc2d.js"><link rel="prefetch" href="/assets/js/329.8a070436.js"><link rel="prefetch" href="/assets/js/33.d717808e.js"><link rel="prefetch" href="/assets/js/330.fb6eb821.js"><link rel="prefetch" href="/assets/js/331.23f95cd0.js"><link rel="prefetch" href="/assets/js/332.0abbc779.js"><link rel="prefetch" href="/assets/js/333.3e30f739.js"><link rel="prefetch" href="/assets/js/334.ceee0f2d.js"><link rel="prefetch" href="/assets/js/335.17972dcc.js"><link rel="prefetch" href="/assets/js/336.95493282.js"><link rel="prefetch" href="/assets/js/337.28ba35bb.js"><link rel="prefetch" href="/assets/js/338.393546ae.js"><link rel="prefetch" href="/assets/js/339.6f686732.js"><link rel="prefetch" href="/assets/js/34.eac2aef5.js"><link rel="prefetch" href="/assets/js/340.781006c9.js"><link rel="prefetch" href="/assets/js/341.75fc230d.js"><link rel="prefetch" href="/assets/js/342.7af7d92b.js"><link rel="prefetch" href="/assets/js/343.92af3748.js"><link rel="prefetch" href="/assets/js/344.547f36f8.js"><link rel="prefetch" href="/assets/js/345.fa8e4779.js"><link rel="prefetch" href="/assets/js/346.f9252d71.js"><link rel="prefetch" href="/assets/js/347.5efddb1a.js"><link rel="prefetch" href="/assets/js/348.1d050da9.js"><link rel="prefetch" href="/assets/js/349.3a6a191d.js"><link rel="prefetch" href="/assets/js/35.af699a6d.js"><link rel="prefetch" href="/assets/js/350.1e5f86af.js"><link rel="prefetch" href="/assets/js/351.7e677cdc.js"><link rel="prefetch" href="/assets/js/352.8db30093.js"><link rel="prefetch" href="/assets/js/353.4d9fdedc.js"><link rel="prefetch" href="/assets/js/354.e3865d5e.js"><link rel="prefetch" href="/assets/js/355.43f14008.js"><link rel="prefetch" href="/assets/js/356.6d864900.js"><link rel="prefetch" href="/assets/js/357.a018e358.js"><link rel="prefetch" href="/assets/js/358.2e7926d4.js"><link rel="prefetch" href="/assets/js/359.65aaa7fb.js"><link rel="prefetch" href="/assets/js/36.710b9e51.js"><link rel="prefetch" href="/assets/js/360.2782be02.js"><link rel="prefetch" href="/assets/js/361.6418e6f0.js"><link rel="prefetch" href="/assets/js/362.548bb78f.js"><link rel="prefetch" href="/assets/js/363.4576ea77.js"><link rel="prefetch" href="/assets/js/364.94f183a6.js"><link rel="prefetch" href="/assets/js/365.eb486708.js"><link rel="prefetch" href="/assets/js/366.76566d5f.js"><link rel="prefetch" href="/assets/js/367.216ea156.js"><link rel="prefetch" href="/assets/js/368.421561c8.js"><link rel="prefetch" href="/assets/js/369.c48fc2dd.js"><link rel="prefetch" href="/assets/js/37.98a25780.js"><link rel="prefetch" href="/assets/js/370.75f07d86.js"><link rel="prefetch" href="/assets/js/371.e58ac69a.js"><link rel="prefetch" href="/assets/js/372.ff472718.js"><link rel="prefetch" href="/assets/js/373.f91c21ba.js"><link rel="prefetch" href="/assets/js/374.0b54cc42.js"><link rel="prefetch" href="/assets/js/375.93dffa67.js"><link rel="prefetch" href="/assets/js/376.5a29a118.js"><link rel="prefetch" href="/assets/js/377.f08430c0.js"><link rel="prefetch" href="/assets/js/378.ffc10305.js"><link rel="prefetch" href="/assets/js/379.8e61e9de.js"><link rel="prefetch" href="/assets/js/38.d69ba5f9.js"><link rel="prefetch" href="/assets/js/380.09cd0812.js"><link rel="prefetch" href="/assets/js/381.eefb8f60.js"><link rel="prefetch" href="/assets/js/382.5a48b778.js"><link rel="prefetch" href="/assets/js/383.5fc90858.js"><link rel="prefetch" href="/assets/js/384.2ff7bbad.js"><link rel="prefetch" href="/assets/js/385.62783266.js"><link rel="prefetch" href="/assets/js/386.3ebeff5b.js"><link rel="prefetch" href="/assets/js/387.4ca2c379.js"><link rel="prefetch" href="/assets/js/388.f2de24f4.js"><link rel="prefetch" href="/assets/js/389.eea4f391.js"><link rel="prefetch" href="/assets/js/39.f72ab6b0.js"><link rel="prefetch" href="/assets/js/390.bb66bb81.js"><link rel="prefetch" href="/assets/js/391.f60ac996.js"><link rel="prefetch" href="/assets/js/392.e68fc6bf.js"><link rel="prefetch" href="/assets/js/393.20772627.js"><link rel="prefetch" href="/assets/js/394.c7dadbd0.js"><link rel="prefetch" href="/assets/js/395.0138c145.js"><link rel="prefetch" href="/assets/js/396.084c963c.js"><link rel="prefetch" href="/assets/js/397.f5ab4817.js"><link rel="prefetch" href="/assets/js/398.051211b3.js"><link rel="prefetch" href="/assets/js/399.bc892b4d.js"><link rel="prefetch" href="/assets/js/40.7f149bef.js"><link rel="prefetch" href="/assets/js/400.a53c2513.js"><link rel="prefetch" href="/assets/js/401.3db14319.js"><link rel="prefetch" href="/assets/js/402.83ac693b.js"><link rel="prefetch" href="/assets/js/403.13784c1f.js"><link rel="prefetch" href="/assets/js/41.9369d28d.js"><link rel="prefetch" href="/assets/js/42.b2a889f6.js"><link rel="prefetch" href="/assets/js/43.3c0d6b4e.js"><link rel="prefetch" href="/assets/js/44.674c3905.js"><link rel="prefetch" href="/assets/js/45.0546b2d6.js"><link rel="prefetch" href="/assets/js/46.0a460c34.js"><link rel="prefetch" href="/assets/js/47.365989ba.js"><link rel="prefetch" href="/assets/js/48.7835be2c.js"><link rel="prefetch" href="/assets/js/49.22ee7a80.js"><link rel="prefetch" href="/assets/js/5.e8a60949.js"><link rel="prefetch" href="/assets/js/50.2db190b1.js"><link rel="prefetch" href="/assets/js/51.17f9deee.js"><link rel="prefetch" href="/assets/js/52.11a7ff10.js"><link rel="prefetch" href="/assets/js/53.de277eda.js"><link rel="prefetch" href="/assets/js/54.81ee491e.js"><link rel="prefetch" href="/assets/js/55.7f27f8a1.js"><link rel="prefetch" href="/assets/js/56.a3c2077f.js"><link rel="prefetch" href="/assets/js/57.53f1a3f2.js"><link rel="prefetch" href="/assets/js/58.0fb67481.js"><link rel="prefetch" href="/assets/js/59.a36c79f7.js"><link rel="prefetch" href="/assets/js/6.ff783162.js"><link rel="prefetch" href="/assets/js/60.b592da2e.js"><link rel="prefetch" href="/assets/js/61.c05c2bba.js"><link rel="prefetch" href="/assets/js/62.69a447fc.js"><link rel="prefetch" href="/assets/js/63.ed0eeaeb.js"><link rel="prefetch" href="/assets/js/64.e87722fb.js"><link rel="prefetch" href="/assets/js/65.944f93ec.js"><link rel="prefetch" href="/assets/js/66.2daebee7.js"><link rel="prefetch" href="/assets/js/67.4455d860.js"><link rel="prefetch" href="/assets/js/68.54ec05f9.js"><link rel="prefetch" href="/assets/js/69.fa08b217.js"><link rel="prefetch" href="/assets/js/70.9921bfa5.js"><link rel="prefetch" href="/assets/js/71.6a84c899.js"><link rel="prefetch" href="/assets/js/72.f7633bf8.js"><link rel="prefetch" href="/assets/js/73.6d7e1828.js"><link rel="prefetch" href="/assets/js/74.913a0394.js"><link rel="prefetch" href="/assets/js/75.d58eea21.js"><link rel="prefetch" href="/assets/js/76.94181a9d.js"><link rel="prefetch" href="/assets/js/77.f7d5a873.js"><link rel="prefetch" href="/assets/js/78.2ba0d535.js"><link rel="prefetch" href="/assets/js/79.1fe57f6d.js"><link rel="prefetch" href="/assets/js/8.abecde44.js"><link rel="prefetch" href="/assets/js/80.cabbcabe.js"><link rel="prefetch" href="/assets/js/81.25f44d08.js"><link rel="prefetch" href="/assets/js/82.89be1b47.js"><link rel="prefetch" href="/assets/js/83.53f01a71.js"><link rel="prefetch" href="/assets/js/84.e2702905.js"><link rel="prefetch" href="/assets/js/85.f45bc74b.js"><link rel="prefetch" href="/assets/js/86.52df52ce.js"><link rel="prefetch" href="/assets/js/87.d92b2eea.js"><link rel="prefetch" href="/assets/js/88.3d0c2cec.js"><link rel="prefetch" href="/assets/js/89.59420407.js"><link rel="prefetch" href="/assets/js/9.0809b3b9.js"><link rel="prefetch" href="/assets/js/90.7c8a7179.js"><link rel="prefetch" href="/assets/js/91.b6f05f98.js"><link rel="prefetch" href="/assets/js/92.aedc32e1.js"><link rel="prefetch" href="/assets/js/93.626546b0.js"><link rel="prefetch" href="/assets/js/94.dd2d36dc.js"><link rel="prefetch" href="/assets/js/95.054e5002.js"><link rel="prefetch" href="/assets/js/96.941a3452.js"><link rel="prefetch" href="/assets/js/97.13025a37.js"><link rel="prefetch" href="/assets/js/98.7a1167b4.js"><link rel="prefetch" href="/assets/js/99.561291a3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.75a488ab.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/index/logo.png" alt="阿星 精神时の屋" class="logo"> <span class="site-name can-hide">阿星 精神时の屋</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><a href="/java/" class="link-title">Java</a> <span class="title" style="display:none;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>java基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/se/" class="nav-link">Java基础</a></li><li class="dropdown-subitem"><a href="/java/collection/" class="nav-link">Java集合</a></li><li class="dropdown-subitem"><a href="/java/se/reflect/" class="nav-link">Java反射</a></li><li class="dropdown-subitem"><a href="/java/juc/" class="nav-link">JavaJUC</a></li><li class="dropdown-subitem"><a href="/java/jvm/" class="nav-link">JavaJVM</a></li></ul></li><li class="dropdown-item"><h4>Java容器</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/javaweb/concept/" class="nav-link">JavaWeb</a></li></ul></li><li class="dropdown-item"><h4>Java版本新特性</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/new-features/" class="nav-link">Java新特性</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/database/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/oracle/" class="nav-link">Oracle</a></li></ul></li><li class="dropdown-item"><h4>NoSQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/redis/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/es/" class="nav-link">ElasticSearch</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><a href="/frames/" class="link-title">框架</a> <span class="title" style="display:none;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mybatis/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/mybatis-plus/" class="nav-link">MyBatis-Plus</a></li></ul></li><li class="dropdown-item"><h4>消息中间件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/activemq/" class="nav-link">ActiveMQ</a></li><li class="dropdown-subitem"><a href="/rabbitmq/" class="nav-link">RabbitMQ</a></li><li class="dropdown-subitem"><a href="/rocketmq/" class="nav-link">RocketMQ</a></li><li class="dropdown-subitem"><a href="/kafka/" class="nav-link">Kafka</a></li></ul></li><li class="dropdown-item"><h4>进阶服务</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/nginx/" class="nav-link">Nginx</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring生态" class="dropdown-title"><a href="/spring-ecology/" class="link-title">Spring生态</a> <span class="title" style="display:none;">Spring生态</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/spring/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/spring-boot/" class="nav-link">Spring Boot</a></li><li class="dropdown-item"><!----> <a href="/spring-security/" class="nav-link">Spring Security</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发" class="dropdown-title"><a href="/dev-guide/" class="link-title">开发</a> <span class="title" style="display:none;">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/design-pattern/" class="nav-link">设计模式</a></li><li class="dropdown-item"><!----> <a href="/algorithm/" class="nav-link">算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><a href="/tool/" class="link-title">工具</a> <span class="title" style="display:none;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/maven/" class="nav-link">Maven</a></li><li class="dropdown-subitem"><a href="/git/" class="nav-link">Git</a></li></ul></li><li class="dropdown-item"><h4>部署</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/linux/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/docker/" class="nav-link">Docker</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/front/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/typescript/" class="nav-link router-link-active">TypeScript</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/react/" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/vue2/" class="nav-link">Vue2</a></li><li class="dropdown-subitem"><a href="/vue3/" class="nav-link">Vue3</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/whells-use/" class="nav-link">轮子工具</a></li><li class="dropdown-item"><!----> <a href="/projects/" class="nav-link">项目工程</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>本站</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">归档</a></li></ul></li><li class="dropdown-item"><h4>我的</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whell/web/" class="nav-link">收藏</a></li><li class="dropdown-subitem"><a href="/about/website/introduce/" class="nav-link">关于</a></li></ul></li></ul></div></div> <a href="https://github.com/mijingduI/mijingdui.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.staticaly.com/gh/mijingduI/image-hosting@master/20230308/blog20230308235831.zff5bilpq4g.webp"> <div class="blogger-info"><h3>日暮途远</h3> <span>朝圣的使徒，正在走向编程的至高殿堂！</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><a href="/java/" class="link-title">Java</a> <span class="title" style="display:none;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>java基础</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/se/" class="nav-link">Java基础</a></li><li class="dropdown-subitem"><a href="/java/collection/" class="nav-link">Java集合</a></li><li class="dropdown-subitem"><a href="/java/se/reflect/" class="nav-link">Java反射</a></li><li class="dropdown-subitem"><a href="/java/juc/" class="nav-link">JavaJUC</a></li><li class="dropdown-subitem"><a href="/java/jvm/" class="nav-link">JavaJVM</a></li></ul></li><li class="dropdown-item"><h4>Java容器</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/javaweb/concept/" class="nav-link">JavaWeb</a></li></ul></li><li class="dropdown-item"><h4>Java版本新特性</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/java/new-features/" class="nav-link">Java新特性</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><a href="/database/" class="link-title">数据库</a> <span class="title" style="display:none;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>SQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-subitem"><a href="/oracle/" class="nav-link">Oracle</a></li></ul></li><li class="dropdown-item"><h4>NoSQL 数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/redis/" class="nav-link">Redis</a></li><li class="dropdown-subitem"><a href="/es/" class="nav-link">ElasticSearch</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="框架" class="dropdown-title"><a href="/frames/" class="link-title">框架</a> <span class="title" style="display:none;">框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/mybatis/" class="nav-link">MyBatis</a></li><li class="dropdown-subitem"><a href="/mybatis-plus/" class="nav-link">MyBatis-Plus</a></li></ul></li><li class="dropdown-item"><h4>消息中间件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/activemq/" class="nav-link">ActiveMQ</a></li><li class="dropdown-subitem"><a href="/rabbitmq/" class="nav-link">RabbitMQ</a></li><li class="dropdown-subitem"><a href="/rocketmq/" class="nav-link">RocketMQ</a></li><li class="dropdown-subitem"><a href="/kafka/" class="nav-link">Kafka</a></li></ul></li><li class="dropdown-item"><h4>进阶服务</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/nginx/" class="nav-link">Nginx</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Spring生态" class="dropdown-title"><a href="/spring-ecology/" class="link-title">Spring生态</a> <span class="title" style="display:none;">Spring生态</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/spring/" class="nav-link">Spring</a></li><li class="dropdown-item"><!----> <a href="/spring-boot/" class="nav-link">Spring Boot</a></li><li class="dropdown-item"><!----> <a href="/spring-security/" class="nav-link">Spring Security</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="开发" class="dropdown-title"><a href="/dev-guide/" class="link-title">开发</a> <span class="title" style="display:none;">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/design-pattern/" class="nav-link">设计模式</a></li><li class="dropdown-item"><!----> <a href="/algorithm/" class="nav-link">算法</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><a href="/tool/" class="link-title">工具</a> <span class="title" style="display:none;">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>管理</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/maven/" class="nav-link">Maven</a></li><li class="dropdown-subitem"><a href="/git/" class="nav-link">Git</a></li></ul></li><li class="dropdown-item"><h4>部署</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/linux/" class="nav-link">Linux</a></li><li class="dropdown-subitem"><a href="/docker/" class="nav-link">Docker</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端" class="dropdown-title"><a href="/front/" class="link-title">前端</a> <span class="title" style="display:none;">前端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>进阶</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/typescript/" class="nav-link router-link-active">TypeScript</a></li></ul></li><li class="dropdown-item"><h4>框架</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/react/" class="nav-link">React</a></li><li class="dropdown-subitem"><a href="/vue2/" class="nav-link">Vue2</a></li><li class="dropdown-subitem"><a href="/vue3/" class="nav-link">Vue3</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="更多" class="dropdown-title"><!----> <span class="title" style="display:;">更多</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/whells-use/" class="nav-link">轮子工具</a></li><li class="dropdown-item"><!----> <a href="/projects/" class="nav-link">项目工程</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link">友情链接</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>本站</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-subitem"><a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-subitem"><a href="/archives/" class="nav-link">归档</a></li></ul></li><li class="dropdown-item"><h4>我的</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/whell/web/" class="nav-link">收藏</a></li><li class="dropdown-subitem"><a href="/about/website/introduce/" class="nav-link">关于</a></li></ul></li></ul></div></div> <a href="https://github.com/mijingduI/mijingdui.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>超文本标记语言 - Html</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>解释编程语言 - JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>JS 超集语言 - TypeScript</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/typescript/introduce/" class="sidebar-link">TypeScript - 介绍</a></li><li><a href="/typescript/installation-use/" class="sidebar-link">TypeScript - 安装和使用</a></li><li><a href="/typescript/basic-type/" class="sidebar-link">TypeScript - 基本类型</a></li><li><a href="/typescript/compilation-configuration/" class="sidebar-link">TypeScript - 编译和配置</a></li><li><a href="/typescript/collect-files/" class="sidebar-link">TypeScript - 文件打包</a></li><li><a href="/typescript/interface/" class="sidebar-link">TypeScript - 接口</a></li><li><a href="/typescript/function/" class="sidebar-link">TypeScript - 函数</a></li><li><a href="/typescript/class/" class="sidebar-link">TypeScript - 类</a></li><li><a href="/typescript/generic-paradigm/" class="sidebar-link">TypeScript - 泛型</a></li><li><a href="/typescript/type-inference/" class="sidebar-link">TypeScript - 类型推断</a></li><li><a href="/typescript/advanced-type/" class="sidebar-link">TypeScript - 高级类型</a></li><li><a href="/typescript/office/introduction/" class="sidebar-link">TypeScript Office - 入门</a></li><li><a href="/typescript/office/common-type/" class="sidebar-link">TypeScript Office - 常用类型</a></li><li><a href="/typescript/office/type-reduction/" class="sidebar-link">TypeScript Office - 类型缩小</a></li><li><a href="/typescript/office/more-funtion/" class="sidebar-link">TypeScript Office - 更多函数</a></li><li><a href="/typescript/office/object-type/" class="sidebar-link">TypeScript Office - 对象类型</a></li><li><a href="/typescript/office/type-manipulation/" class="sidebar-link">TypeScript Office - 类型操纵</a></li><li><a href="/typescript/office/class/" aria-current="page" class="active sidebar-link">TypeScript Office - 类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/typescript/office/class/#类" class="sidebar-link">类</a></li><li class="sidebar-sub-header level2"><a href="/typescript/office/class/#类成员" class="sidebar-link">类成员</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/typescript/office/class/#类属性" class="sidebar-link">类属性</a></li><li class="sidebar-sub-header level3"><a href="/typescript/office/class/#readonly" class="sidebar-link">readonly</a></li><li class="sidebar-sub-header level3"><a href="/typescript/office/class/#构造器" class="sidebar-link">构造器</a></li><li class="sidebar-sub-header level3"><a href="/typescript/office/class/#super-调用" class="sidebar-link">Super 调用</a></li><li class="sidebar-sub-header level3"><a href="/typescript/office/class/#方法" class="sidebar-link">方法</a></li><li class="sidebar-sub-header level3"><a href="/typescript/office/class/#getters-setters" class="sidebar-link">Getters / Setters</a></li><li class="sidebar-sub-header level3"><a href="/typescript/office/class/#索引签名" class="sidebar-link">索引签名</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/typescript/office/class/#类继承" class="sidebar-link">类继承</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/typescript/office/class/#implements-子句" class="sidebar-link">implements 子句</a></li><li class="sidebar-sub-header level3"><a href="/typescript/office/class/#注意事项" class="sidebar-link">注意事项</a></li><li class="sidebar-sub-header level3"><a href="/typescript/office/class/#extends-子句" class="sidebar-link">extends 子句</a></li><li class="sidebar-sub-header level3"><a href="/typescript/office/class/#重写方法" class="sidebar-link">重写方法</a></li><li class="sidebar-sub-header level3"><a href="/typescript/office/class/#初始化顺序" class="sidebar-link">初始化顺序</a></li><li class="sidebar-sub-header level3"><a href="/typescript/office/class/#继承内置类型" class="sidebar-link">继承内置类型</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/typescript/office/class/#成员的可见性" class="sidebar-link">成员的可见性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/typescript/office/class/#public" class="sidebar-link">public</a></li><li class="sidebar-sub-header level3"><a href="/typescript/office/class/#protected" class="sidebar-link">protected</a></li><li class="sidebar-sub-header level3"><a href="/typescript/office/class/#private" class="sidebar-link">private</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/typescript/office/class/#静态成员" class="sidebar-link">静态成员</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/typescript/office/class/#特殊静态名称" class="sidebar-link">特殊静态名称</a></li><li class="sidebar-sub-header level3"><a href="/typescript/office/class/#为什么没有静态类" class="sidebar-link">为什么没有静态类？</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/typescript/office/class/#类里的-static-区块" class="sidebar-link">类里的 static 区块</a></li><li class="sidebar-sub-header level2"><a href="/typescript/office/class/#泛型类" class="sidebar-link">泛型类</a></li><li class="sidebar-sub-header level2"><a href="/typescript/office/class/#类运行时中的this" class="sidebar-link">类运行时中的this</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/typescript/office/class/#箭头函数" class="sidebar-link">箭头函数</a></li><li class="sidebar-sub-header level3"><a href="/typescript/office/class/#this-参数" class="sidebar-link">this 参数</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/typescript/office/class/#this类型" class="sidebar-link">this类型</a></li><li class="sidebar-sub-header level2"><a href="/typescript/office/class/#基于类型守卫的-this" class="sidebar-link">基于类型守卫的 this</a></li><li class="sidebar-sub-header level2"><a href="/typescript/office/class/#参数属性" class="sidebar-link">参数属性</a></li><li class="sidebar-sub-header level2"><a href="/typescript/office/class/#类表达式" class="sidebar-link">类表达式</a></li><li class="sidebar-sub-header level2"><a href="/typescript/office/class/#抽象类和成员" class="sidebar-link">抽象类和成员</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/typescript/office/class/#抽象构造签名" class="sidebar-link">抽象构造签名</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/typescript/office/class/#类之间的关系" class="sidebar-link">类之间的关系</a></li></ul></li><li><a href="/typescript/office/modules/" class="sidebar-link">TypeScript Office - 模块</a></li><li><a href="/typescript/office/variable-declaration/" class="sidebar-link">TypeScript Office - 变量声明</a></li><li><a href="/typescript/office/type-inference/" class="sidebar-link">TypeScript Office - 类型推断</a></li><li><a href="/typescript/office/enums/" class="sidebar-link">TypeScript Office - 枚举</a></li><li><a href="/typescript/office/public-type/" class="sidebar-link">TypeScript Office - 公共类型</a></li><li><a href="/typescript/office/symbols/" class="sidebar-link">TypeScript Office - Symbols</a></li><li><a href="/typescript/office/type-compatibility/" class="sidebar-link">TypeScript Office - 类型兼容性</a></li><li><a href="/typescript/office/iterator-generator/" class="sidebar-link">TypeScript Office - 迭代器和生成器</a></li><li><a href="/typescript/office/decorators/" class="sidebar-link">TypeScript Office - 装饰器</a></li><li><a href="/typescript/office/jsx/" class="sidebar-link">TypeScript Office - JSX</a></li><li><a href="/typescript/office/mixins/" class="sidebar-link">TypeScript Office - 混入</a></li><li><a href="/typescript/office/triple-slash-command/" class="sidebar-link">TypeScript Office - 三斜线指令</a></li><li><a href="/typescript/office/advanced-module/" class="sidebar-link">TypeScript Office - 模块进阶</a></li><li><a href="/typescript/office/module-analysis/" class="sidebar-link">TypeScript Office - 模块解析</a></li><li><a href="/typescript/office/namespace/" class="sidebar-link">TypeScript Office - 命名空间</a></li><li><a href="/typescript/office/namespace-modules/" class="sidebar-link">TypeScript Office - 命名空间与模块</a></li><li><a href="/typescript/office/declaration-of-merger/" class="sidebar-link">TypeScript Office - 声明合并</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>界面构建框架 - React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>渐进式框架 - Vue2</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>渐进式框架 - Vue3</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=%E5%89%8D%E7%AB%AF" title="分类" data-v-06225672>前端</a></li><li data-v-06225672><a href="/categories/?category=JS%20%E8%B6%85%E9%9B%86%E8%AF%AD%E8%A8%80%20-%20TypeScript" title="分类" data-v-06225672>JS 超集语言 - TypeScript</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://mijingdui.github.io" target="_blank" title="作者" class="beLink" data-v-06225672>阿星 </a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2022-09-12</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">TypeScript Office - 类<!----></h1> <!----> <div class="theme-vdoing-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#类">类</a></li><li><a href="#类成员">类成员</a><ul><li><a href="#类属性">类属性</a></li><li><a href="#readonly">readonly</a></li><li><a href="#构造器">构造器</a></li><li><a href="#super-调用">Super 调用</a></li><li><a href="#方法">方法</a></li><li><a href="#getters-setters">Getters / Setters</a></li><li><a href="#索引签名">索引签名</a></li></ul></li><li><a href="#类继承">类继承</a><ul><li><a href="#implements-子句">implements 子句</a></li><li><a href="#注意事项">注意事项</a></li><li><a href="#extends-子句">extends 子句</a></li><li><a href="#重写方法">重写方法</a></li><li><a href="#初始化顺序">初始化顺序</a></li><li><a href="#继承内置类型">继承内置类型</a></li></ul></li><li><a href="#成员的可见性">成员的可见性</a><ul><li><a href="#public">public</a></li><li><a href="#protected">protected</a></li><li><a href="#private">private</a></li></ul></li><li><a href="#静态成员">静态成员</a><ul><li><a href="#特殊静态名称">特殊静态名称</a></li><li><a href="#为什么没有静态类">为什么没有静态类？</a></li></ul></li><li><a href="#类里的-static-区块">类里的 static 区块</a></li><li><a href="#泛型类">泛型类</a></li><li><a href="#类运行时中的this">类运行时中的this</a><ul><li><a href="#箭头函数">箭头函数</a></li><li><a href="#this-参数">this 参数</a></li></ul></li><li><a href="#this类型">this类型</a></li><li><a href="#基于类型守卫的-this">基于类型守卫的 this</a></li><li><a href="#参数属性">参数属性</a></li><li><a href="#类表达式">类表达式</a></li><li><a href="#抽象类和成员">抽象类和成员</a><ul><li><a href="#抽象构造签名">抽象构造签名</a></li></ul></li><li><a href="#类之间的关系">类之间的关系</a></li></ul></div><p></p> <h2 id="类"><a href="#类" class="header-anchor">#</a> 类</h2> <p>TypeScript 提供了对 ES2015 中引入的 class 关键词的完全支持。</p> <p>与其他 JavaScript 语言功能一样，TypeScript 增加了类型注释和其他语法，允许你表达类和其他类型之间的关系。</p> <h2 id="类成员"><a href="#类成员" class="header-anchor">#</a> 类成员</h2> <p>这里有一个最基本的类，一个空的类：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这个类还不是很有用，所以我们开始添加一些成员。</p> <h3 id="类属性"><a href="#类属性" class="header-anchor">#</a> 类属性</h3> <p>在一个类上声明字段，创建一个公共的可写属性。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
    x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> pt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pt<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
pt<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>与其他位置一样，类型注解是可选的，但如果不指定，将是一个隐含的 any 类型。</p> <p>字段也可以有初始化器；这些初始化器将在类被实例化时自动运行。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
    x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> pt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Prints 0, 0</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pt<span class="token punctuation">.</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>pt<span class="token punctuation">.</span>y<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>就像 const、let 和 var 一样，一个类属性的初始化器将被用来推断其类型。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> pt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
pt<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">;</span> <span class="token comment">// 报错：px.x 是 number 类型</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>--strictPropertyInitialization</p></blockquote> <p>strictPropertyInitialization 设置控制是否需要在构造函数中初始化类字段。</p> <p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/TypeScript/20220912230802.png" alt="image-20220912230358317"></p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">BadGreeter</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/TypeScript/20220912230748.png" alt="image-20220912230417812"></p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">GoodGreeter</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>请注意，该字段需要在构造函数本身中初始化。TypeScript 不会分析你从构造函数中调用的方法来检测初始化，因为派生类可能会覆盖这些方法而无法初始化成员。</p> <p>如果你打算通过构造函数以外的方式来确定初始化一个字段（例如，也许一个外部库为你填充了你的类的一部分），你可以使用确定的赋值断言操作符 <code>!</code>。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">OKGreeter</span> <span class="token punctuation">{</span>
    <span class="token comment">// 没有初始化，但没报错。</span>
    name<span class="token operator">!</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="readonly"><a href="#readonly" class="header-anchor">#</a> readonly</h3> <p>字段的前缀可以是 readonly 修饰符。这可以防止在构造函数之外对该字段进行赋值。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Greeter</span> <span class="token punctuation">{</span>
    <span class="token keyword">readonly</span> name<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>otherName<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>otherName <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> otherName<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">err</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;not ok&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> g <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Greeter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;also not ok&quot;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/TypeScript/20220912230749.png" alt="image-20220912230539648"></p> <h3 id="构造器"><a href="#构造器" class="header-anchor">#</a> 构造器</h3> <p>类构造函数与函数非常相似。你可以添加带有类型注释的参数、默认值和重载：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
    x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    <span class="token comment">// 带默认值的正常签名</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
    <span class="token comment">// 重载</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>xs<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">,</span> y<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// ...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>类的构造函数签名和函数签名之间只有一些区别：</p> <ul><li>构造函数不能有类型参数，这属于外层类的声明，我们将在后面学习</li> <li>构造函数不能有返回类型注释，类的实例类型总是被返回的</li></ul> <h3 id="super-调用"><a href="#super-调用" class="header-anchor">#</a> Super 调用</h3> <p>就像在 JavaScript 中一样，如果你有一个基类，在使用任何 this. 成员之前，你需要在构造器主体中调用 <code>super();</code>。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    k <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Derived</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 在ES5中打印一个错误的值；在ES6中抛出异常。</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>k<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/TypeScript/20220912230812.png" alt="image-20220912230809980"></p> <p>在 JavaScript 中，忘记调用 super 是一个很容易犯的错误，但 TypeScript 会在必要时告诉你。</p> <h3 id="方法"><a href="#方法" class="header-anchor">#</a> 方法</h3> <p>一个类上的函数属性被称为方法。方法可以使用与函数和构造函数相同的所有类型注释。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
    x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    y <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token function">scale</span><span class="token punctuation">(</span>n<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">*=</span> n<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">*=</span> n<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>除了标准的类型注解，TypeScript 并没有为方法添加其他新的东西。</p> <p>请注意，在一个方法体中，仍然必须通过 this 访问字段和其他方法。方法体中的非限定名称将总是指代包围范围内的东西。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">let</span> x<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token punctuation">{</span>
    x<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
    <span class="token function">m</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 这是在试图修改第1行的'x'，而不是类属性。</span>
        x <span class="token operator">=</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="getters-setters"><a href="#getters-setters" class="header-anchor">#</a> Getters / Setters</h3> <p>类也可以有访问器：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token punctuation">{</span>
    _length <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">get</span> <span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">set</span> <span class="token function">length</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_length <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><blockquote><p>请注意，一个没有额外逻辑的字段支持的 get/set 对在JavaScript中很少有用。如果你不需要在 get/set 操作中添加额外的逻辑，暴露公共字段也是可以的。</p></blockquote> <p>TypeScript 对访问器有一些特殊的推理规则：</p> <ul><li>如果存在 get，但没有 set，则该属性自动是只读的</li> <li>如果没有指定 setter 参数的类型，它将从 getter 的返回类型中推断出来</li> <li>访问器和设置器必须有相同的成员可见性</li></ul> <p>从 TypeScript 4.3 开始，可以有不同类型的访问器用于获取和设置。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Thing</span> <span class="token punctuation">{</span>
    _size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">get</span> <span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_size<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">set</span> <span class="token function">size</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> num <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 不允许NaN、Infinity等</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Number<span class="token punctuation">.</span><span class="token function">isFinite</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>_size <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_size <span class="token operator">=</span> num<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="索引签名"><a href="#索引签名" class="header-anchor">#</a> 索引签名</h3> <p>类可以声明索引签名；这些签名的作用与其他对象类型的索引签名相同。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">check</span><span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>因为索引签名类型需要同时捕获方法的类型，所以要有用地使用这些类型并不容易。一般来说，最好将索引数据存储在另一个地方，而不是在类实例本身。</p> <h2 id="类继承"><a href="#类继承" class="header-anchor">#</a> 类继承</h2> <p>像其他具有面向对象特性的语言一样，JavaScript 中的类可以继承自基类。</p> <h3 id="implements-子句"><a href="#implements-子句" class="header-anchor">#</a> implements 子句</h3> <p>你可以使用一个 implements 子句来检查一个类，是否满足了一个特定的接口。如果一个类不能正确地实现它，就会发出一个错误。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Pingable</span> <span class="token punctuation">{</span>
    <span class="token function">ping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Sonar</span> <span class="token keyword">implements</span> <span class="token class-name">Pingable</span> <span class="token punctuation">{</span>
    <span class="token function">ping</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ping!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Ball</span> <span class="token keyword">implements</span> <span class="token class-name">Pingable</span> <span class="token punctuation">{</span>
    <span class="token function">pong</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;pong!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/TypeScript/20220912231030.png" alt="image-20220912231028913"></p> <p>类也可以实现多个接口，例如 <code>class C implements A, B {</code>。</p> <h3 id="注意事项"><a href="#注意事项" class="header-anchor">#</a> 注意事项</h3> <p>重要的是要明白，implements 子句只是检查类是否可以被当作接口类型来对待。它根本不会改变类的类型或其方法。一个常见的错误来源是认为 implements 子句会改变类的类型，它不会，它不会！</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name">Checkable</span> <span class="token punctuation">{</span>
    <span class="token function">check</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">NameChecker</span> <span class="token keyword">implements</span> <span class="token class-name">Checkable</span> <span class="token punctuation">{</span>
    <span class="token function">check</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// any：注意这里没有错误</span>
        <span class="token keyword">return</span> s<span class="token punctuation">.</span><span class="token function">toLowercse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;ok&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/TypeScript/20220912231124.png" alt="image-20220912231122911"></p> <p>在这个例子中，我们也许期望 s 的类型会受到 check 的 <code>name: string</code> 参数的影响。事实并非如此，实现子句并没有改变类主体的检查方式或其类型的推断。</p> <p>同样地，实现一个带有可选属性的接口并不能创建该属性。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">interface</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>
    x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    y<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>
    x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">C</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
c<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/TypeScript/20220912231200.png" alt="image-20220912231157946"></p> <h3 id="extends-子句"><a href="#extends-子句" class="header-anchor">#</a> extends 子句</h3> <p>类可以从基类中扩展出来。派生类拥有其基类的所有属性和方法，也可以定义额外的成员。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Moving along!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
    <span class="token function">woof</span><span class="token punctuation">(</span>times<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> times<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;woof!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 基类的类方法</span>
d<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 派生的类方法</span>
d<span class="token punctuation">.</span><span class="token function">woof</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="重写方法"><a href="#重写方法" class="header-anchor">#</a> 重写方法</h3> <p>派生类也可以覆盖基类的一个字段或属性。你可以使用 super. 语法来访问基类方法。注意，因为 JavaScript 类是一个简单的查找对象，没有「超级字段」的概念。</p> <p>TypeScript 强制要求派生类总是其基类的一个子类型。</p> <p>例如，这里有一个合法的方法来覆盖一个方法。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Derived</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    <span class="token function">greet</span><span class="token punctuation">(</span>name<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Derived</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
d<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
d<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token string">&quot;reader&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>派生类遵循其基类契约是很重要的。请记住，通过基类引用来引用派生类实例是非常常见的（而且总是合法的）。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 通过基类引用对派生实例进行取别名</span>
<span class="token keyword">const</span> b<span class="token operator">:</span> Base <span class="token operator">=</span> d<span class="token punctuation">;</span>
<span class="token comment">// 没问题</span>
b<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>如果 Derived 没有遵守 Base 的约定怎么办？</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Derived</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使这个参数成为必需的</span>
    <span class="token function">greet</span><span class="token punctuation">(</span>name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Hello, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/TypeScript/20220912231324.png" alt="image-20220912231322653"></p> <p>如果我们不顾错误编译这段代码，这个样本就会崩溃：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> b<span class="token operator">:</span> Base <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Derived</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 崩溃，因为 &quot;名称 &quot;将是 undefined。</span>
b<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/TypeScript/20220912231350.png" alt="image-20220912231345475"></p> <h3 id="初始化顺序"><a href="#初始化顺序" class="header-anchor">#</a> 初始化顺序</h3> <p>在某些情况下，JavaScript 类的初始化顺序可能会令人惊讶。让我们考虑一下这段代码：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> <span class="token string">&quot;base&quot;</span><span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;My name is &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Derived</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> <span class="token string">&quot;derived&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 打印 &quot;base&quot;, 而不是 &quot;derived&quot;</span>
<span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Derived</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>这里发生了什么？</p> <p>按照 JavaScript 的定义，类初始化的顺序是：</p> <ul><li>基类的字段被初始化</li> <li>基类构造函数运行</li> <li>派生类的字段被初始化</li> <li>派生类构造函数运行</li></ul> <p>这意味着基类构造函数在自己的构造函数中看到了自己的 name 值，因为派生类的字段初始化还没有运行。</p> <h3 id="继承内置类型"><a href="#继承内置类型" class="header-anchor">#</a> 继承内置类型</h3> <blockquote><p>注意：如果你不打算继承 Array、Error、Map 等内置类型，或者你的编译目标明确设置为 ES6/ES2015 或以上，你可以跳过本节。</p></blockquote> <p>在ES2015中，返回对象的构造函数隐含地替代了 <code>super(...)</code> 的任何调用者的 this 的值。生成的构造函数代码有必要捕获 <code>super(...)</code> 的任何潜在返回值并将其替换为 this 。</p> <p>因此，子类化 Error、Array 等可能不再像预期那样工作。这是由于 Error 、 Array 等的构造函数使用 ECMAScript 6 的 <code>new.target</code> 来调整原型链；然而，在 ECMAScript 5 中调用构造函数时，没有办法确保 <code>new.target</code> 的值。其他的下级编译器一般默认有同样的限制。</p> <p>对于一个像下面这样的子类：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">MsgError</span> <span class="token keyword">extends</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>m<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;hello &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>你可能会发现：</p> <ul><li>方法在构造这些子类所返回的对象上可能是未定义的，所以调用 sayHello 会导致错误</li></ul> <p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/TypeScript/20220912231541.png" alt="image-20220912231539656"></p> <ul><li><p>instanceof 将在子类的实例和它们的实例之间被打破，所以 <code>(new MsgError()) instanceof MsgError</code> 将返回 false</p> <p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/TypeScript/20220912231607.png" alt="image-20220912231606888"></p></li></ul> <p>作为建议，你可以在任何 <code>super(...)</code> 调用后立即手动调整原型。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">MsgError</span> <span class="token keyword">extends</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>m<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 明确地设置原型。</span>
        Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> MsgError<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;hello &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>message<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/TypeScript/20220912231632.png" alt="image-20220912231629313"></p> <p>然而，MsgError 的任何子类也必须手动设置原型。对于不支持 <code>Object.setPrototypeOf</code> 的运行时，你可以使用 <strong>proto</strong> 来代替。</p> <p>不幸的是，这些变通方法在 Internet Explorer 10 和更早的版本上不起作用。我们可以手动将原型中的方法复制到实例本身（例如 <code>MsgError.prototype</code> 到 this），但是原型链本身不能被修复。</p> <h2 id="成员的可见性"><a href="#成员的可见性" class="header-anchor">#</a> 成员的可见性</h2> <p>你可以使用 TypeScript 来控制某些方法或属性对类外的代码是否可见。</p> <h3 id="public"><a href="#public" class="header-anchor">#</a> public</h3> <p>类成员的默认可见性是公共（public）的。一个公共（public）成员可以在任何地方被访问。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Greeter</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hi!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> g <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Greeter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>因为 public 已经是默认的可见性修饰符，所以你永远不需要在类成员上写它，但为了风格 / 可读性的原因，可能会选择这样做。</p> <h3 id="protected"><a href="#protected" class="header-anchor">#</a> protected</h3> <p>受保护的（protected）成员只对它们所声明的类的子类可见。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Greeter</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">protected</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;hi&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">SpecialGreeter</span> <span class="token keyword">extends</span> <span class="token class-name">Greeter</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token function">howdy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 在此可以访问受保护的成员</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Howdy, &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> g <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpecialGreeter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
g<span class="token punctuation">.</span><span class="token function">greet</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 没有问题</span>
g<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 无权访问</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><img src="https://cdn.staticaly.com/gh/Kele-Bingtang/static@master/img/TypeScript/20220912231820.png" alt="image-20220912231818744"></p> <blockquote><p>受保护成员的暴露</p></blockquote> <p>派生类需要遵循它们的基类契约，但可以选择公开具有更多能力的基类的子类型。这包括将受保护的成员变成公开。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
<span class="token keyword">protected</span> m <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Derived</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
<span class="token comment">// 没有修饰符，所以默认为'公共'('public')</span>
m <span class="token operator">=</span> <span class="token number">15</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Derived</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>m<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// OK</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="private"><a href="#private" class="header-anchor">#</a> private</h3> <p>private 和 protected 一样，但不允许从子类中访问该成员。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Base</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 不能从类外访问</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Base</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Derived</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    <span class="token function">showX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 不能在子类中访问</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>因为私有（private）成员对派生类是不可见的，所以派生类不能增加其可见性。</p> <blockquote><p>跨实例的私有访问</p></blockquote> <p>不同的 OOP 语言对同一个类的不同实例，是否可以访问对方的私有成员，有不同的处理方法。虽然像 Java、C#、C++、Swift 和 PHP 等语言允许这样做，但 Ruby 不允许。</p> <p>TypeScript确实允许跨实例的私有访问：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name"><span class="token constant">A</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token function">sameAs</span><span class="token punctuation">(</span>other<span class="token operator">:</span> <span class="token constant">A</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 可以访问</span>
        <span class="token keyword">return</span> other<span class="token punctuation">.</span>x <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>注意事项</p></blockquote> <p>像 TypeScript 类型系统的其他方面一样，private 和 protected 只在类型检查中被强制执行。</p> <p>这意味着 JavaScript 的运行时结构，如 in 或简单的属性查询，仍然可以访问一个私有或保护的成员。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">MySafe</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> secretKey <span class="token operator">=</span> <span class="token number">12345</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 在 JS 环境中...</span>
<span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MySafe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 将打印 12345</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>secretKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>private 也允许在类型检查时使用括号符号进行访问。这使得私有声明的字段可能更容易被单元测试之类的东西所访问，缺点是这些字段是软性私有的，不能严格执行私有特性。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">MySafe</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> secretKey <span class="token operator">=</span> <span class="token number">12345</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MySafe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 在类型检查期间不允许</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>secretKey<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 正确</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span><span class="token string">&quot;secretKey&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>与 TypeScript 的 private 不同，JavaScript 的 private 字段（#）在编译后仍然是 private 的，并且不提供前面提到的像括号符号访问那样的转义窗口，使其成为硬 private。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>
    #barkAmount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    personality <span class="token operator">=</span> <span class="token string">&quot;happy&quot;</span><span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 0</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>#barkAmount<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// undefined</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span>barkAmount<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>当编译到 ES2021 或更少时，TypeScript 将使用 WeakMaps 来代替 #。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> _Dog_barkAmount<span class="token punctuation">;</span>
<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        _Dog_barkAmount<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>personality <span class="token operator">=</span> <span class="token string">&quot;happy&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
_Dog_barkAmount <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>如果你需要保护你的类中的值免受恶意行为的影响，你应该使用提供硬运行时隐私的机制，如闭包、WeakMaps 或私有字段。请注意，这些在运行时增加的隐私检查可能会影响性能。</p> <h2 id="静态成员"><a href="#静态成员" class="header-anchor">#</a> 静态成员</h2> <p>类可以有静态成员。这些成员并不与类的特定实例相关联。它们可以通过类的构造函数对象本身来访问。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token function">printX</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>MyClass<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>MyClass<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
MyClass<span class="token punctuation">.</span><span class="token function">printX</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>静态成员也可以使用相同的 public、protected 和 private 可见性修饰符。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>MyClass<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>静态成员也会被继承。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token function">getGreeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Hello world&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Derived</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    myGreeting <span class="token operator">=</span> Derived<span class="token punctuation">.</span><span class="token function">getGreeting</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="特殊静态名称"><a href="#特殊静态名称" class="header-anchor">#</a> 特殊静态名称</h3> <p>一般来说，从函数原型覆盖属性是不安全的 / 不可能的。因为类本身就是可以用 new 调用的函数，所以某些静态名称不能使用。像 name、length 和 call 这样的函数属性，定义为静态成员是无效的。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name"><span class="token constant">S</span></span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> name <span class="token operator">=</span> <span class="token string">&quot;S!&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="为什么没有静态类"><a href="#为什么没有静态类" class="header-anchor">#</a> 为什么没有静态类？</h3> <p>TypeScript（和 JavaScript）没有像 C# 和 Java 那样有一个叫做静态类的结构。</p> <p>这些结构体的存在，只是因为这些语言强制所有的数据和函数都在一个类里面；因为这个限制在 TypeScript中不存在，所以不需要它们。一个只有一个实例的类，在 JavaScript / TypeScript 中通常只是表示为一个普通的对象。</p> <p>例如，我们不需要 TypeScript 中的「静态类」语法，因为一个普通的对象（甚至是顶级函数）也可以完成这个工作。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 不需要 &quot;static&quot; class</span>
<span class="token keyword">class</span> <span class="token class-name">MyStaticClass</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 首选 (备选 1)</span>
<span class="token keyword">function</span> <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// 首选 (备选 2)</span>
<span class="token keyword">const</span> MyHelperObject <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">dosomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="类里的-static-区块"><a href="#类里的-static-区块" class="header-anchor">#</a> 类里的 static 区块</h2> <p>静态块允许你写一串有自己作用域的语句，可以访问包含类中的私有字段。这意味着我们可以用写语句的所有能力来写初始化代码，不泄露变量，并能完全访问我们类的内部结构。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> #count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">get</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Foo<span class="token punctuation">.</span>#count<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">static</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> lastInstances <span class="token operator">=</span> <span class="token punctuation">{</span>
            length<span class="token operator">:</span> <span class="token number">100</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
        Foo<span class="token punctuation">.</span>#count <span class="token operator">+=</span> lastInstances<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">catch</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="泛型类"><a href="#泛型类" class="header-anchor">#</a> 泛型类</h2> <p>类，和接口一样，可以是泛型的。当一个泛型类用 new 实例化时，其类型参数的推断方式与函数调用的方式相同。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Box<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    contents<span class="token operator">:</span> Type<span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>contents <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// const b: Box&lt;string&gt;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Box</span><span class="token punctuation">(</span><span class="token string">&quot;hello!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>类可以像接口一样使用通用约束和默认值。</p> <blockquote><p>静态成员中的类型参数</p></blockquote> <p>这段代码是不合法的，可能并不明显，为什么呢？</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Box<span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    <span class="token comment">// 静态成员不能引用类的类型参数。</span>
    <span class="token keyword">static</span> defaultValue<span class="token operator">:</span> Type<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// Box&lt;string&gt;.defaultValue = 'hello'</span>
<span class="token comment">// console.log(Box&lt;number&gt;.defaultValue)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>请记住，类型总是被完全擦除的，在运行时，只有一个 <code>Box.defaultValue</code> 属性。这意味着设置 <code>Box.defaultValue</code>（如果有可能的话）也会改变 <code>Box.defaultValue</code>，这可不是什么好事。一个泛型类的静态成员永远不能引用该类的类型参数。</p> <h2 id="类运行时中的this"><a href="#类运行时中的this" class="header-anchor">#</a> 类运行时中的this</h2> <p>重要的是要记住，TypeScript 并没有改变 JavaScript 的运行时行为，而 JavaScript 的运行时行为偶尔很奇特。</p> <p>比如，JavaScript 对这一点的处理确实是不寻常的：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> <span class="token string">&quot;MyClass&quot;</span><span class="token punctuation">;</span>
    <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token string">&quot;obj&quot;</span><span class="token punctuation">,</span>
    getName<span class="token operator">:</span> c<span class="token punctuation">.</span>getName<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 输出 &quot;obj&quot;, 而不是 &quot;MyClass&quot;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>长话短说，默认情况下，函数内 this 的值取决于函数的调用方式。在这个例子中，因为函数是通过 obj 引用调用的，所以它的 this 值是 obj 而不是类实例。</p> <p>这很少是你希望发生的事情。TypeScript 提供了一些方法来减轻或防止这种错误。</p> <h3 id="箭头函数"><a href="#箭头函数" class="header-anchor">#</a> 箭头函数</h3> <p>如果你有一个经常会被调用的函数，失去了它的 this 上下文，那么使用一个箭头函数而不是方法定义是有意义的。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> <span class="token string">&quot;MyClass&quot;</span><span class="token punctuation">;</span>
    <span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> g <span class="token operator">=</span> c<span class="token punctuation">.</span>getName<span class="token punctuation">;</span>
<span class="token comment">// 输出 &quot;MyClass&quot;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>这有一些权衡：</p> <ul><li>this 值保证在运行时是正确的，即使是没有经过 TypeScript 检查的代码也是如此</li> <li>这将使用更多的内存，因为每个类实例将有它自己的副本，每个函数都是这样定义的</li> <li>你不能在派生类中使用 <code>super.getName</code>，因为在原型链中没有入口可以获取基类方法</li></ul> <h3 id="this-参数"><a href="#this-参数" class="header-anchor">#</a> this 参数</h3> <p>在方法或函数定义中，一个名为 this 的初始参数在 TypeScript 中具有特殊的意义。这些参数在编译过程中会被删除。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 带有 &quot;this&quot; 参数的 TypeScript 输入</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> SomeType<span class="token punctuation">,</span> x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 编译后的JavaScript结果</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>TypeScript 检查调用带有 this 参数的函数，是否在正确的上下文中进行。我们可以不使用箭头函数，而是在方法定义中添加一个 this 参数，以静态地确保方法被正确调用。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">MyClass</span> <span class="token punctuation">{</span>
    name <span class="token operator">=</span> <span class="token string">&quot;MyClass&quot;</span><span class="token punctuation">;</span>
    <span class="token function">getName</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> MyClass<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 正确</span>
c<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 错误</span>
<span class="token keyword">const</span> g <span class="token operator">=</span> c<span class="token punctuation">.</span>getName<span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">g</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>这种方法做出了与箭头函数方法相反的取舍：</p> <ul><li>JavaScript 调用者仍然可能在不知不觉中错误地使用类方法</li> <li>每个类定义只有一个函数被分配，而不是每个类实例一个函数</li> <li>基类方法定义仍然可以通过 super 调用</li></ul> <h2 id="this类型"><a href="#this类型" class="header-anchor">#</a> this类型</h2> <p>在类中，一个叫做 this 的特殊类型动态地指向当前类的类型。让我们来看看这有什么用：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Box</span> <span class="token punctuation">{</span>
    contents<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">// (method) Box.set(value: string): this</span>
    <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>contents <span class="token operator">=</span> value<span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>在这里，TypeScript 推断出 set 的返回类型是 this，而不是 Box。现在让我们做一个 Box 的子类：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">ClearableBox</span> <span class="token keyword">extends</span> <span class="token class-name">Box</span> <span class="token punctuation">{</span>
    <span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>contents <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ClearableBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// const b: ClearableBox</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>你也可以在参数类型注释中使用 this：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Box</span> <span class="token punctuation">{</span>
    content<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token function">sameAs</span><span class="token punctuation">(</span>other<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> other<span class="token punctuation">.</span>content <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> box <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Box</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>box<span class="token punctuation">.</span><span class="token function">sameAs</span><span class="token punctuation">(</span>box<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>这与其他写法不同：Box，如果你有一个派生类，它的 sameAs 方法现在只接受该同一派生类的其他实例。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Box</span> <span class="token punctuation">{</span>
    content<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token function">sameAs</span><span class="token punctuation">(</span>other<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> other<span class="token punctuation">.</span>content <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>content<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">DerivedBox</span> <span class="token keyword">extends</span> <span class="token class-name">Box</span> <span class="token punctuation">{</span>
    otherContent<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;?&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> base <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Box</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> derived <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DerivedBox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
derived<span class="token punctuation">.</span><span class="token function">sameAs</span><span class="token punctuation">(</span>base<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="基于类型守卫的-this"><a href="#基于类型守卫的-this" class="header-anchor">#</a> 基于类型守卫的 this</h2> <p>你可以在类和接口的方法的返回位置使用 <code>this is Type</code>。当与类型缩小混合时（例如 if 语句），目标对象的类型将被缩小到指定的 Type。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">FileSystemObject</span> <span class="token punctuation">{</span>
    <span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">this</span> <span class="token keyword">is</span> FileRep <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">FileRep</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">this</span> <span class="token keyword">is</span> Directory <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">Directory</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">isNetworked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">this</span> <span class="token keyword">is</span> Networked <span class="token operator">&amp;</span> <span class="token keyword">this</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>networked<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token keyword">private</span> networked<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">FileRep</span> <span class="token keyword">extends</span> <span class="token class-name">FileSystemObject</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token keyword">public</span> content<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Directory</span> <span class="token keyword">extends</span> <span class="token class-name">FileSystemObject</span> <span class="token punctuation">{</span>
    children<span class="token operator">:</span> FileSystemObject<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">interface</span> <span class="token class-name">Networked</span> <span class="token punctuation">{</span>
    host<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> fso<span class="token operator">:</span> FileSystemObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileRep</span><span class="token punctuation">(</span><span class="token string">&quot;foo/bar.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>fso<span class="token punctuation">.</span><span class="token function">isFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// const fso: FileRep</span>
    fso<span class="token punctuation">.</span>content<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>fso<span class="token punctuation">.</span><span class="token function">isDirectory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// const fso: Directory</span>
    fso<span class="token punctuation">.</span>children<span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>fso<span class="token punctuation">.</span><span class="token function">isNetworked</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// const fso: Networked &amp; FileSystemObject</span>
    fso<span class="token punctuation">.</span>host<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p>基于 this 的类型保护的一个常见用例，是允许对一个特定字段进行懒惰验证。例如，这种情况下，当 hasValue 被验证为真时，就会从框内持有的值中删除一个未定义值。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Box <span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    value<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>
    <span class="token function">hasValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">this</span> <span class="token keyword">is</span> <span class="token punctuation">{</span> value<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> box <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Box</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
box<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">&quot;Gameboy&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// (property) Box&lt;unknown&gt;.value?: unknownbox.value;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>box<span class="token punctuation">.</span><span class="token function">hasValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// (property) value: unknown</span>
    box<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="参数属性"><a href="#参数属性" class="header-anchor">#</a> 参数属性</h2> <p>TypeScript提供了特殊的语法，可以将构造函数参数变成具有相同名称和值的类属性。这些被称为参数 属性，通过在构造函数参数前加上可见性修饰符 public、private、protected 或 readonly 中的一个来创建。由此产生的字段会得到这些修饰符。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Params</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> <span class="token keyword">readonly</span> x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token keyword">protected</span> y<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token keyword">private</span> z<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// No body necessary</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Params</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// (property) Params.x: number</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>z<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="类表达式"><a href="#类表达式" class="header-anchor">#</a> 类表达式</h2> <p>类表达式与类声明非常相似。唯一真正的区别是，类表达式不需要一个名字，尽管我们可以通过它们最终绑定的任何标识符来引用它们。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">const</span> someClass <span class="token operator">=</span> <span class="token keyword">class</span><span class="token operator">&lt;</span>Type<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    content<span class="token operator">:</span> Type<span class="token punctuation">;</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>value<span class="token operator">:</span> Type<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>content <span class="token operator">=</span> value<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// const m: someClass&lt;string&gt;</span>
<span class="token keyword">const</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">someClass</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="抽象类和成员"><a href="#抽象类和成员" class="header-anchor">#</a> 抽象类和成员</h2> <p>TypeScript中的类、方法和字段可以是抽象的。</p> <p>一个抽象的方法或抽象的字段是一个没有提供实现的方法或字段。这些成员必须存在于一个抽象类中，不能直接实例化。</p> <p>抽象类的作用是作为子类的基类，实现所有的抽象成员。当一个类没有任何抽象成员时，我们就说它是具体的。</p> <p>让我们看一个例子：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    <span class="token keyword">abstract</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    <span class="token function">printName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello, &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Base</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>我们不能用 new 来实例化 Base，因为它是抽象的。相反，我们需要创建一个派生类并实现抽象成员。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Derived</span> <span class="token keyword">extends</span> <span class="token class-name">Base</span> <span class="token punctuation">{</span>
    <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;world&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Derived</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
d<span class="token punctuation">.</span><span class="token function">printName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="抽象构造签名"><a href="#抽象构造签名" class="header-anchor">#</a> 抽象构造签名</h3> <p>有时你想接受一些类的构造函数，产生一个从某些抽象类派生出来的类的实例。</p> <p>例如，你可能想写这样的代码：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>ctor<span class="token operator">:</span> <span class="token keyword">typeof</span> Base<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ctor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    instance<span class="token punctuation">.</span><span class="token function">printName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>TypeScript 正确地告诉你，你正试图实例化一个抽象类。毕竟，鉴于 greet 的定义，写这段代码是完全合法的，它最终会构造一个抽象类。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token comment">// 槽糕</span>
<span class="token function">greet</span><span class="token punctuation">(</span>Base<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>相反，你想写一个函数，接受具有结构化签名的东西：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">function</span> <span class="token function">greet</span><span class="token punctuation">(</span>ctor<span class="token operator">:</span> <span class="token keyword">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Base<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ctor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    instance<span class="token punctuation">.</span><span class="token function">printName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">greet</span><span class="token punctuation">(</span>Derived<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">greet</span><span class="token punctuation">(</span>Base<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>现在 TypeScript 正确地告诉你哪些类的构造函数可以被调用：Derived 可以，因为它是具体的，但 Base 不能。</p> <h2 id="类之间的关系"><a href="#类之间的关系" class="header-anchor">#</a> 类之间的关系</h2> <p>在大多数情况下，TypeScript 中的类在结构上与其他类型相同，是可以比较的。</p> <p>例如，这两个类可以互相替代使用，因为它们是相同的：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Point1</span> <span class="token punctuation">{</span>
    x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Point2</span> <span class="token punctuation">{</span>
    x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 正确</span>
<span class="token keyword">const</span> p<span class="token operator">:</span> Point1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Point2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>同样地，即使没有明确的继承，类之间的子类型关系也是存在的：</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Employee</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    salary<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 正确</span>
<span class="token keyword">const</span> p<span class="token operator">:</span> Person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Employee</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>这听起来很简单，但有几种情况似乎比其他情况更奇怪。</p> <p>空的类没有成员。在一个结构化类型系统中，一个没有成员的类型通常是其他任何东西的超类型。所以 如果你写了一个空类（不要），任何东西都可以用来代替它。</p> <div class="language-typescript line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">Empty</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span>x<span class="token operator">:</span> Empty<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// 不能用 'x' 做任何事</span>
<span class="token punctuation">}</span>
<span class="token comment">// 以下调用均可</span>
<span class="token operator">!</span><span class="token function">fn</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fn</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://github.com/mijingduI/mijingdui.github.io/edit/master/docs/50.前端/30.JS 超集语言 - TypeScript/35.TypeScript Office - 类.md" target="_blank" rel="noopener noreferrer">编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=TypeScript" title="标签">#TypeScript</a></div> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2023/07/04, 03:31:55</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/typescript/office/type-manipulation/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">TypeScript Office - 类型操纵</div></a> <a href="/typescript/office/modules/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">TypeScript Office - 模块</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/typescript/office/type-manipulation/" class="prev">TypeScript Office - 类型操纵</a></span> <span class="next"><a href="/typescript/office/modules/">TypeScript Office - 模块</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/about/learn-line/"><div>
            自我 - 学习线
            <span class="title-tag">
              原创
            </span></div></a> <span class="date">07-05</span></dt></dl><dl><dd>02</dd> <dt><a href="/about/me/introduce/"><div>
            自我 - 介绍
            <span class="title-tag">
              原创
            </span></div></a> <span class="date"></span></dt></dl><dl><dd>03</dd> <dt><a href="/git/commit-dev/"><div>
            Git - Commit 开发规范
            <!----></div></a> <span class="date"></span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/mijingduI" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://gitee.com/mijingduI" title="Gitee" target="_blank" class="iconfont icon-gitee"></a><a href="https://mijingdui.github.io/" title="网站首页" target="_blank" class="iconfont icon-rss"></a><a href="http://wpa.qq.com/msgrd?v=3&amp;uin=727539981&amp;site=qq&amp;menu=yes" title="QQ" target="_blank" class="iconfont icon-QQ"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2023-2023
    <span>阿星  | blog<br> <a href="https://github.com/mijingduI/mijingdui.github.io/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"><div></div><div></div></div></div>
    <script src="/assets/js/app.e9152798.js" defer></script><script src="/assets/js/2.38a2c275.js" defer></script><script src="/assets/js/317.ae13d1dd.js" defer></script><script src="/assets/js/7.c9d16a87.js" defer></script><script src="/assets/js/4.d198576f.js" defer></script>
  </body>
</html>
